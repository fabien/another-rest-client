!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.RestClient=t():e.RestClient=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){var t=[],n=function(e,n){n="function"==typeof n?n():n,n=null===n?"":void 0===n?"":n,t[t.length]=encodeURIComponent(e)+"="+encodeURIComponent(n)},r=function e(r,o){var i=void 0,u=void 0,f=void 0;if(r)if(Array.isArray(o))for(i=0,u=o.length;i<u;i++)e("object"===j(o[i])&&o[i]?r+"["+i+"]":r,o[i]);else if("[object Object]"===String(o))for(f in o)e(r+"["+f+"]",o[f]);else n(r,o);else if(Array.isArray(o))for(i=0,u=o.length;i<u;i++)n(o[i].name,o[i].value);else for(f in o)e(f,o[f]);return t};return r("",e).join("&")}function f(e,t,n){try{var r=e(t);return"function"==typeof n&&n(null,r),r}catch(r){return"function"==typeof n?n(r):(console.error('Error in function "'+e.name+'" while decode/encode data'),console.log(e),console.log(t),console.log(r)),t}}function s(e){var t={};return e.forEach(function(e){"object"===("undefined"==typeof e?"undefined":j(e))&&x(t,e)}),t}function a(e){return"object"===("undefined"==typeof e?"undefined":j(e))?0!==Object.keys(e).length:void 0!==e}function c(e,t){for(var n in t)"function"==typeof t[n]?e[n]=p(t[n],e):e[n]=t[n]}function p(e,t){return function(){return e.apply(t,arguments)}}function d(e,t,n,r,i){var f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},p=arguments[6],l=i?i:function(e,n){if("object"===("undefined"==typeof e?"undefined":j(e)))n=x({},e),e=void 0;else if(void 0===e)return l;return l._clone(t,e,void 0,n)};return t===l&&(t=void 0),l._resources={},l._shortcuts={},l._parent=t,l._headers={},l._params={},l._clone=function(t,r,o,i,u){var s=x({},f,i),a=d(e,t,o||n,r,null,s,u);a._shortcuts=x({},l._shortcuts);for(var c in l._resources)a._resources[c]=l._resources[c]._clone(a,void 0,void 0,i,u),c in a._shortcuts&&(a[c]=a._resources[c]);return a},l.res=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e._opts.shortcut,r=arguments[2],o=arguments[3],i=function(t){var i={},u=x({},r);if("object"===("undefined"==typeof t?"undefined":j(t))&&"string"==typeof t.name&&(i=x(i,t),t=i.name,void 0!==i.shortcut&&(n=i.shortcut),u=x({},i.params,u),o=i.paramsFn||o),t in l._resources)return l._resources[t];var f=d(e,l,t,void 0,void 0,u,o);if(l._resources[t]=f,n){var s="string"==typeof n?n:t;l._shortcuts[s]=f,l[s]=f,e._opts.shortcutRules.forEach(function(e){var n=e(t);n&&"string"==typeof n&&(l._shortcuts[n]=f,l[n]=f)})}return i.resources&&f.res(i.resources),f};if(t.constructor===String)return i(t);if(t instanceof Array)return t.map(i);if(t instanceof Object){var u={};for(var f in t){var s=i(f);t[f]&&s.res(t[f]),u[f]=s}return u}},l.execute=function(t,n,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e._opts.contentType;"string"==typeof o?(i=o,o={}):"string"==typeof r&&(i=r,r={});var u=Array.isArray(r)?l.url.apply(l,r):l.url(r);return o=x({},l.getHeaders(),o),e._request(t,u,n,o,i)},l._execute=function(e,t){return l.execute.apply(l,[e].concat(t))},l.baseUrl=function(){var e=t?t.baseUrl():"";return n&&(e+="/"+n),void 0!==r&&(e+="/"+r),e},l.url=function(){for(var o=arguments.length,i=Array(o),f=0;f<o;f++)i[f]=arguments[f];var c=l.baseUrl(),p=[l.getParams()].concat(i);if(e._opts.mergeParams){var d=[],y=0,v=s(p);c=c.replace(/\/?[:\*](\w+)/g,function(e,t){y+=1;var n=v[t]||v[y],r=g(n)||m(n);return r||d.push(t),0!==c.indexOf(e)||r?r?"":"/"+encodeURIComponent(n):encodeURIComponent(n)}),p=[_(v,d)]}var h=p.filter(a).map(function(o){return e.emit("params",o,l,t,n,r),u(o)}).join("&");return h&&(c+="?"+h),c},l.use=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.shift(),o=void 0;return o=Array.isArray(r)||"number"==typeof r?l.apply(l,[].concat(r)):l[r],"function"==typeof o&&"function"==typeof o.use&&t.length>0?o.use.apply(o,t):o},l.id=function(e){return l(e)},l.scope=function(){for(var e,n=arguments.length,i=Array(n),u=0;u<n;u++)i[u]=arguments[u];i=(e=[]).concat.apply(e,o(i));var f={},s=void 0;"function"==typeof i[i.length-1]&&(s=i.pop()),"object"===j(i[i.length-1])&&x(f,i.pop());var c=i.filter(a).map(function(e){return"string"==typeof e&&e.match(/^:/)?e:encodeURIComponent(e)}).join("/");return""===c?l._clone(t,r,void 0,f,s):l._clone(l,void 0,c,f,s)},l.setParams=l.param=l.params=function(e,t){return"object"===("undefined"==typeof e?"undefined":j(e))?x(l._params,e):"string"==typeof e&&(l._params[e]=t),l},l.getParams=function(){var e="function"==typeof p?p.call(l,t,n,r):{};return x({},f,t?t.getParams():{},l._params,e)},l.setHeaders=l.header=l.headers=function(e,t){return"object"===("undefined"==typeof e?"undefined":j(e))?x(l._headers,e):"string"==typeof e&&(l._headers[e]=t),l},l.getHeaders=function(){return x({},t?t.getHeaders():{},l._headers)},l.extend||(l.extend=function(e){if("object"===("undefined"==typeof e?"undefined":j(e)))c(l,e);else if("function"==typeof e){var o=e(l,t,n,r);o&&c(l,"object"===("undefined"==typeof o?"undefined":j(o))?o:{})}}),l.get=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.execute("GET",{},t)},l.post=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return l._execute("POST",t)},l.put=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return l._execute("PUT",t)},l.patch=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return l._execute("PATCH",t)},l.delete=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return l._execute("DELETE",t)},e.emit("resource",l,t,n,r),l}function l(e,t,n,r,o,i,u,s){var a=e||r.responseText,c=r.getResponseHeader("Content-Type");if(c){var p=c.split(";")[0],d=i[p];if(d&&d.decode)return void f(d.decode,a,function(e,t){e?s(x(e,{xhr:r})):u(t)})}u(a)}function y(e,t,n,r,o,i,u,f){e.emit("response",n,r),t.emit("response",n,r),200===n.status||201===n.status||204===n.status?(e.emit("success",n,r),t.emit("success",n,r),t.off(),l(f,e,t,n,r,o,i,u)):h(e,t,n,r,o,i,u)}function v(e,t,n,r,o){e.emit("error",n,r,o),t.emit("error",n,r,o),t.off()}function h(e,t,n,r,o,i,u,f){f&&(e.emit("response",n,r),t.emit("response",n,r)),e._opts.errorInstances?new Promise(function(i,u){l(null,e,t,n,r,o,i,u)}).then(function(o){var i=new Error("Request failed.");"object"===("undefined"==typeof o?"undefined":j(o))&&("object"===j(o.error)&&"string"==typeof o.error.message&&(i=new Error(o.error.message)),i.details=o),i.xhr=n,v(e,t,n,r,i),u(i,r)},function(o){v(e,t,n,r,o),u(o,r)}):(e.emit("error",n,r),t.emit("error",n,r),t.off(),u(n,r))}function m(e){return null===e&&"object"===("undefined"==typeof e?"undefined":j(e))}function g(e){return"undefined"==typeof e}function _(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r=(t=[]).concat.apply(t,o(r)),Object.keys(e).reduce(function(t,n){return r.indexOf(n)===-1&&(t[n]=e[n]),t},{})}var b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A=n(1),w=r(A),T=function(){function e(t,n){i(this,e),this.host=t,this.conf(n),new w.default(this),d(this,void 0,"",void 0,this)}return b(e,[{key:"conf",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._opts||{transport:"default",trailing:"",shortcut:!0,shortcutRules:[],mergeParams:!0,errorInstances:!0,contentType:"application/json","application/x-www-form-urlencoded":{encode:u},"application/json":{encode:JSON.stringify,decode:JSON.parse}};return this._opts=x(t,e),x({},this._opts)}},{key:"extend",value:function(e,t){var n=this,r=function(e,t,n,r){return!0};"string"==typeof t?r=function(e,n,r,o){return r===t}:t instanceof RegExp?r=function(e,n,r,o){return t.test(r)}:"function"===t&&(r=function(e,r,o,i){return t.call(n,e,r,o,i)}),this.on("resource",function(t,n,o,i){r(t,n,o,i)&&t.extend(e)})}},{key:"_request",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(n.indexOf("?")===-1?n+=this._opts.trailing:n=n.replace("?",this._opts.trailing+"?"),i){var u=this._opts[i];u&&u.encode&&(r=f(u.encode,r)),"multipart/form-data"===i&&"FormData"===r.constructor.name||(o["Content-Type"]=i)}var s={method:t,data:r,url:this.host+n,contentType:i,headers:o},a=e.Transports[this._opts.transport];return a(this,s,this._opts)}}]),e}();e.exports=T,T.Transports={},T.Transports.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.method,o=t.data,i=t.url,u=t.headers,f=new XMLHttpRequest;f.open(r,i,!0);for(var s in u)f.setRequestHeader(s,u[s]);var a=new Promise(function(r,o){return f.onreadystatechange=function(){4===f.readyState&&y(e,a,f,t,n,r,o)}});return a.xhr=f,new w.default(a),setTimeout(function(){e.emit("request",f,t),a.emit("request",f,t),f.send(o)},0),a},T.Transports.jquery=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=$[n.jqueryAjax||"ajax"](x({beforeSend:function(n){e.emit("request",n,t),o.emit("request",n,t)}},t)),o=new Promise(function(i,u){o.xhr=r,new w.default(o),r.done(function(r,f,s){y(e,o,s,t,n,i,u,r)}).fail(function(r,f,s){h(e,o,r,t,n,i,u,!0)})});return o}},function(e,t){e.exports=function(e){var t={},n=[];e=e||this,e.on=function(n,r,o){return(t[n]=t[n]||[]).push([r,o]),e},e.off=function(r,o){r||(t={});for(var i=t[r]||n,u=i.length=o?i.length:0;u--;)o==i[u][0]&&i.splice(u,1);return e},e.emit=function(r){for(var o,i=t[r]||n,u=i.length>0?i.slice(0,i.length):i,f=0;o=u[f++];)o[0].apply(o[1],n.slice.call(arguments,1));return e}}}])});
//# sourceMappingURL=rest-client.min.js.map