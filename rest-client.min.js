!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.RestClient=t():e.RestClient=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t.substr(0,t.length-1)}function u(e,t){try{return e(t)}catch(n){return console.error('Error in function "'+e.name+'" while decode/encode data'),console.log(e),console.log(t),console.log(n),t}}function s(e){var t={};return e.forEach(function(e){"object"===("undefined"==typeof e?"undefined":y(e))&&v(t,e)}),[t]}function a(e){return"object"===("undefined"==typeof e?"undefined":y(e))?0!==Object.keys(e).length:void 0!==e}function c(e,t){for(var n in t)"function"==typeof t[n]?e[n]=f(t[n],e):e[n]=t[n]}function f(e,t){return function(){return e.apply(t,arguments)}}function p(e,t,n,r,o){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},f=arguments[6],d=o?o:function(e,n){if("object"===("undefined"==typeof e?"undefined":y(e)))n=v({},e),e=void 0;else if(void 0===e)return d;return d._clone(t,e,void 0,n)};return d._resources={},d._shortcuts={},d._parent=t,d._headers={},d._params={},d._clone=function(t,r,i,s,a){var c=v({},u,s),f=p(e,t,i||n,r,o,c,a);f._shortcuts=d._shortcuts;for(var l in d._resources)f._resources[l]=d._resources[l]._clone(f,void 0,void 0,s,a),l in f._shortcuts&&(f[l]=f._resources[l]);return f},d.res=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e._opts.shortcut,r=arguments[2],o=arguments[3],i=function(t){var i={},u=v({},r);if("object"===("undefined"==typeof t?"undefined":y(t))&&"string"==typeof t.name&&(i=v(i,t),t=i.name,void 0!==i.shortcut&&(n=i.shortcut),u=v({},i.params,u),o=i.paramsFn||o),t in d._resources)return d._resources[t];var s=p(e,d,t,void 0,void 0,u,o);if(d._resources[t]=s,n){var a="string"==typeof n?n:t;d._shortcuts[a]=s,d[a]=s,e._opts.shortcutRules.forEach(function(e){var n=e(t);n&&"string"==typeof n&&(d._shortcuts[n]=s,d[n]=s)})}return i.resources&&s.res(i.resources),s};if(t.constructor===String)return i(t);if(t instanceof Array)return t.map(i);if(t instanceof Object){var u={};for(var s in t){var a=i(s);t[s]&&a.res(t[s]),u[s]=a}return u}},d.execute=function(t,n,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e._opts.contentType;"string"==typeof o?(i=o,o={}):"string"==typeof r&&(i=r,r={});var u=Array.isArray(r)?d.url.apply(d,r):d.url(r);return o=v({},d.getHeaders(),o),e._request(t,u,n,o,i)},d._execute=function(e,t){return d.execute.apply(d,[e].concat(t))},d.baseUrl=function(){var e=t?t.baseUrl():"";return n&&(e+="/"+n),void 0!==r&&(e+="/"+r),e},d.url=function(){for(var o=arguments.length,u=Array(o),c=0;c<o;c++)u[c]=arguments[c];var f=d.baseUrl(),p=[d.getParams()].concat(u);e._opts.mergeParams&&(p=s(p));var l=p.filter(a).map(function(o){return e.emit("params",o,d,t,n,r),i(o)}).join("&");return l&&(f+="?"+l),f},d.use=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.shift(),o=void 0;return o=Array.isArray(r)||"number"==typeof r?d.apply(d,[].concat(r)):d[r],"function"==typeof o&&"function"==typeof o.use&&t.length>0?o.use.apply(o,t):o},d.id=function(e){return d(e)},d.scope=function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];var i={},u=void 0;"function"==typeof n[n.length-1]&&(u=n.pop()),"object"===y(n[n.length-1])&&v(i,n.pop());var s=n.filter(a).map(encodeURIComponent).join("/");return""===s?d._clone(t,r,void 0,i,u):d._clone(d,void 0,s,i,u)},d.setParams=d.param=d.params=function(e,t){return"object"===("undefined"==typeof e?"undefined":y(e))?v(d._params,e):"string"==typeof e&&(d._params[e]=t),d},d.getParams=function(){var e="function"==typeof f?f.call(d,t,n,r):{};return v({},u,t?t.getParams():{},d._params,e)},d.setHeaders=d.header=d.headers=function(e,t){return"object"===("undefined"==typeof e?"undefined":y(e))?v(d._headers,e):"string"==typeof e&&(d._headers[e]=t),d},d.getHeaders=function(){return v({},t?t.getHeaders():{},d._headers)},d.extend||(d.extend=function(e){if("object"===("undefined"==typeof e?"undefined":y(e)))c(d,e);else if("function"==typeof e){var o=e(d,t,n,r);o&&c(d,"object"===("undefined"==typeof o?"undefined":y(o))?o:{})}}),d.get=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.execute("GET",{},t)},d.post=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return d._execute("POST",t)},d.put=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return d._execute("PUT",t)},d.patch=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return d._execute("PATCH",t)},d.delete=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return d._execute("DELETE",t)},e.emit("resource",d,t,n,r),d}function d(e,t,n,r,o,i,s,a){if(e.emit("response",n,r),t.emit("response",n,r),200===n.status||201===n.status||204===n.status){e.emit("success",n,r),t.emit("success",n,r);var c=a||n.responseText,f=n.getResponseHeader("Content-Type");if(f){var p=f.split(";")[0],d=o[p];d&&d.decode&&(c=u(d.decode,c))}t.off(),i(c)}else l(e,t,n,r,o,i,s)}function l(e,t,n,r,o,i,u,s){s&&(e.emit("response",n,r),t.emit("response",n,r)),e.emit("error",n,r),t.emit("error",n,r),t.off(),u(n,r)}var h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=n(1),g=r(m),_=function(){function e(t,n){o(this,e),this.host=t,this.conf(n),new g.default(this),p(this,void 0,"",void 0,this)}return h(e,[{key:"conf",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._opts||{transport:"default",trailing:"",shortcut:!0,shortcutRules:[],mergeParams:!0,contentType:"application/json","application/x-www-form-urlencoded":{encode:i},"application/json":{encode:JSON.stringify,decode:JSON.parse}};return this._opts=v(t,e),v({},this._opts)}},{key:"extend",value:function(e,t){var n=this,r=function(e,t,n,r){return!0};"string"==typeof t?r=function(e,n,r,o){return r===t}:t instanceof RegExp?r=function(e,n,r,o){return t.test(r)}:"function"===t&&(r=function(e,r,o,i){return t.call(n,e,r,o,i)}),this.on("resource",function(t,n,o,i){r(t,n,o,i)&&t.extend(e)})}},{key:"_request",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(n.indexOf("?")===-1?n+=this._opts.trailing:n=n.replace("?",this._opts.trailing+"?"),i){var s=this._opts[i];s&&s.encode&&(r=u(s.encode,r)),"multipart/form-data"===i&&"FormData"===r.constructor.name||(o["Content-Type"]=i)}var a={method:t,data:r,url:this.host+n,contentType:i,headers:o},c=e.Transports[this._opts.transport];return c(this,a,this._opts)}}]),e}();e.exports=_,_.Transports={},_.Transports.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.method,o=t.data,i=t.url,u=t.headers,s=new XMLHttpRequest;s.open(r,i,!0);for(var a in u)s.setRequestHeader(a,u[a]);var c=new Promise(function(r,o){return s.onreadystatechange=function(){4===s.readyState&&d(e,c,s,t,n,r,o)}});return c.xhr=s,new g.default(c),setTimeout(function(){e.emit("request",s,t),c.emit("request",s,t),s.send(o)},0),c},_.Transports.jquery=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=$[n.jqueryAjax||"ajax"](v({beforeSend:function(n){e.emit("request",n,t),o.emit("request",n,t)}},t)),o=new Promise(function(i,u){o.xhr=r,new g.default(o),r.done(function(r,s,a){d(e,o,a,t,n,i,u,r)}).fail(function(r,s,a){l(e,o,r,t,n,i,u,!0)})});return o}},function(e,t){e.exports=function(e){var t={},n=[];e=e||this,e.on=function(n,r,o){return(t[n]=t[n]||[]).push([r,o]),e},e.off=function(r,o){r||(t={});for(var i=t[r]||n,u=i.length=o?i.length:0;u--;)o==i[u][0]&&i.splice(u,1);return e},e.emit=function(r){for(var o,i=t[r]||n,u=i.length>0?i.slice(0,i.length):i,s=0;o=u[s++];)o[0].apply(o[1],n.slice.call(arguments,1));return e}}}])});
//# sourceMappingURL=rest-client.min.js.map