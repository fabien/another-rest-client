!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.RestClient=t():e.RestClient=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t.substr(0,t.length-1)}function i(e,t){try{return e(t)}catch(n){return console.error('Error in function "'+e.name+'" while decode/encode data'),console.log(e),console.log(t),console.log(n),t}}function s(e){var t={};return e.forEach(function(e){"object"===("undefined"==typeof e?"undefined":h(e))&&d(t,e)}),[t]}function c(e){return"object"===("undefined"==typeof e?"undefined":h(e))?0!==Object.keys(e).length:void 0!==e}function a(e,t){for(var n in t)"function"==typeof t[n]?e[n]=f(t[n],e):e[n]=t[n]}function f(e,t){return function(){return e.apply(t,arguments)}}function p(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},f=arguments[6],l=o?o:function(e){return void 0===e?l:l._clone(t,e)};return l._resources={},l._shortcuts={},l._parent=t,l._headers={},l._params={},l._clone=function(t,r,u,s,c){var a=d({},i,s),f=p(e,t,u||n,r,o,a,c);f._shortcuts=l._shortcuts;for(var h in l._resources)f._resources[h]=l._resources[h]._clone(f,void 0,void 0,s,c),h in f._shortcuts&&(f[h]=f._resources[h]);return f},l.res=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e._opts.shortcut,r=function(t){if(t in l._resources)return l._resources[t];var r=p(e,l,t);return l._resources[t]=r,n&&(l._shortcuts[t]=r,l[t]=r,e._opts.shortcutRules.forEach(function(e){var n=e(t);n&&"string"==typeof n&&(l._shortcuts[n]=r,l[n]=r)})),r};if(t.constructor===String)return r(t);if(t instanceof Array)return t.map(r);if(t instanceof Object){var o={};for(var u in t){var i=r(u);t[u]&&i.res(t[u]),o[u]=i}return o}},l.execute=function(t,n,r,o){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e._opts.contentType;"string"==typeof o?(u=o,o={}):"string"==typeof r&&(u=r,r={});var i=Array.isArray(r)?l.url.apply(l,r):l.url(r);return o=d({},l.getHeaders(),o),e._request(t,i,n,o,u)},l._execute=function(e,t){return l.execute.apply(l,[e].concat(t))},l.baseUrl=function(){var e=t?t.baseUrl():"";return n&&(e+="/"+n),void 0!==r&&(e+="/"+r),e},l.url=function(){for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];var f=l.baseUrl(),p=[l.getParams()].concat(i);e._opts.mergeParams&&(p=s(p));var d=p.filter(c).map(function(o){return e.emit("params",o,l,t,n,r),u(o)}).join("&");return d&&(f+="?"+d),f},l.scope=function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];var u={},i=void 0;"function"==typeof n[n.length-1]&&(i=n.pop()),"object"===h(n[n.length-1])&&d(u,n.pop());var s=n.filter(c).map(encodeURIComponent).join("/");return""===s?l._clone(t,r,void 0,u,i):l._clone(l,void 0,s,u,i)},l.param=l.params=function(e,t){return"object"===("undefined"==typeof e?"undefined":h(e))?d(l._params,e):"string"==typeof e&&(l._params[e]=t),l},l.getParams=function(){var e="function"==typeof f?f.call(l,t,n,r):{};return d({},i,t?t.getParams():{},l._params,e)},l.header=l.headers=function(e,t){return"object"===("undefined"==typeof e?"undefined":h(e))?d(l._headers,e):"string"==typeof e&&(l._headers[e]=t),l},l.getHeaders=function(){return d({},t?t.getHeaders():{},l._headers)},l.extend||(l.extend=function(e){if("object"===("undefined"==typeof e?"undefined":h(e)))a(l,e);else if("function"==typeof e){var o=e(l,t,n,r);o&&a(l,"object"===("undefined"==typeof o?"undefined":h(o))?o:{})}}),l.get=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.execute("GET",{},t)},l.post=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return l._execute("POST",t)},l.put=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return l._execute("PUT",t)},l.patch=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return l._execute("PATCH",t)},l.delete=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return l._execute("DELETE",t)},e.emit("resource",l,t,n,r),l}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=n(1),y=r(v),m=function(){function e(t,n){o(this,e),this.host=t,this.conf(n),new y.default(this),p(this,void 0,"",void 0,this)}return l(e,[{key:"conf",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._opts||{trailing:"",shortcut:!0,shortcutRules:[],mergeParams:!0,contentType:"application/json","application/x-www-form-urlencoded":{encode:u},"application/json":{encode:JSON.stringify,decode:JSON.parse}};return this._opts=d(t,e),d({},this._opts)}},{key:"extend",value:function(e,t){var n=this,r=function(e,t,n,r){return!0};"string"==typeof t?r=function(e,n,r,o){return r===t}:t instanceof RegExp?r=function(e,n,r,o){return t.test(r)}:"function"===t&&(r=function(e,r,o,u){return t.call(n,e,r,o,u)}),this.on("resource",function(t,n,o,u){r(t,n,o,u)&&t.extend(e)})}},{key:"_request",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;t.indexOf("?")===-1?t+=this._opts.trailing:t=t.replace("?",this._opts.trailing+"?");var s=new XMLHttpRequest;if(s.open(e,this.host+t,!0),u){var c=this._opts[u];c&&c.encode&&(n=i(c.encode,n)),"multipart/form-data"===u&&"FormData"===n.constructor.name||s.setRequestHeader("Content-Type",u)}var a={method:e,data:n,url:t,contentType:u,headers:o};for(var f in o)s.setRequestHeader(f,o[f]);var p=new Promise(function(e,t){return s.onreadystatechange=function(){if(4===s.readyState)if(r.emit("response",s,a),p.emit("response",s,a),200===s.status||201===s.status||204===s.status){r.emit("success",s,a),p.emit("success",s,a);var n=s.response,o=s.getResponseHeader("Content-Type");if(o){var u=o.split(";")[0],c=r._opts[u];c&&c.decode&&(n=i(c.decode,n))}p.off(),e(n)}else r.emit("error",s,a),p.emit("error",s,a),p.off(),t(s,a)}});return p.xhr=s,new y.default(p),setTimeout(function(){r.emit("request",s,a),p.emit("request",s,a),s.send(n)},0),p}}]),e}();e.exports=m},function(e,t){e.exports=function(e){var t={},n=[];e=e||this,e.on=function(n,r,o){return(t[n]=t[n]||[]).push([r,o]),e},e.off=function(r,o){r||(t={});for(var u=t[r]||n,i=u.length=o?u.length:0;i--;)o==u[i][0]&&u.splice(i,1);return e},e.emit=function(r){for(var o,u=t[r]||n,i=u.length>0?u.slice(0,u.length):u,s=0;o=i[s++];)o[0].apply(o[1],n.slice.call(arguments,1));return e}}}])});
//# sourceMappingURL=rest-client.min.js.map